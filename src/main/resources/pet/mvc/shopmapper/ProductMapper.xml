<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pet.mvc.shopmapper.ProductMapper">
	<select id="selectPerpage" resultType="Product" parameterType="ProductVo">
	<![CDATA[ 
	select * from (select ROWNUM rnum, aa.* from (select * from PRODUCT order by PRODUCT_CODE desc) aa)
	where rnum>#{startRow} and rnum=#{endRow}
	]]>
	</select>
	<select id="selectByCatgo" resultType="Product" parameterType="ProductVo">
	<![CDATA[
	select * from (select ROWNUM rnum, aa.* from (select * from PRODUCT where ${catgo} like '%'||#{keyword}||'%' ) aa)
	where rnum>#{startRow} and rnum<=#{endRow}
	]]>
	</select>
	<select id="selectBySeq" parameterType="long" resultType="Product">
	select * from PRODUCT where SEQ=#{product_code}
	</select>
	<select id="selectCount" resultType="long">
	select count(product_code) from product
	</select>
	<select id="selectCountByCatgo" parameterType="ProductVo" resultType="long">
	select count(product_code) from PRODUCT where ${catgo} like '%'||#{keyword}||'%'
	</select>
	<insert id="insert" parameterType="Product">
		insert into PRODUCT values(PRODUCT_SEQ.nextval, #{product_name}, #{product_price}, #{product_content}, #{product_tag}, #{product_date}, #{product_like}, #{catgo_code})
	</insert>
	<select id="listProduct" resultType="Product" parameterType="long">
	   <!--  select * from PRODUCT where CATGO_CODE= #{catgo_code}-->
	   select * from REVIEW natural join PRODUCT where catgo_code=#{catgo_code}
	</select>
	<select id="listCatgo" resultType="Category" parameterType="long">
		select * from CATGO where CATGO_CODE= #{catgo_code}
	</select>
	<select id="contentReview" resultType="Review" parameterType="long">
		select * from REVIEW 
	</select>
	<select id="listReview2" resultType="Review" parameterType="long">
		select * from REVIEW 
	</select>
	<insert id="insertReview" parameterType="Review">
		insert into REVIEW values(
		#{member_number},
		#{review_subject}, 
		#{review_message}, 
		#{review_email},
		#{review_number},
		#{catgo_code}
		)
	</insert>
	
	<!--select id="selectCartList" parameterType="Cart" resultMap="cartResult">
	<![CDATA[
	select * from CART where member_number=#{member_number}
	]]>
	</select-->
</mapper>